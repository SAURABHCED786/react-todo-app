{"ast":null,"code":"import React, { PureComponent, createRef } from 'react';\nimport { Transition } from 'react-transition-group';\nimport { debounce } from '../../utilities/debounce.js';\nimport { classNames } from '../../utilities/css.js';\nimport { clamp } from '../../utilities/clamp.js';\nimport styles from './BulkActions.scss.js';\nimport { BulkActionMenu } from './components/BulkActionMenu/BulkActionMenu.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { BulkActionButton } from './components/BulkActionButton/BulkActionButton.js';\nimport { Popover } from '../Popover/Popover.js';\nimport { ActionList } from '../ActionList/ActionList.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { Inline } from '../Inline/Inline.js';\nconst MAX_PROMOTED_ACTIONS = 2;\nconst BUTTONS_NODE_ADDITIONAL_WIDTH = 64;\nclass BulkActionsInner extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      popoverVisible: false,\n      containerWidth: 0,\n      measuring: true\n    };\n    this.containerNode = null;\n    this.buttonsNode = null;\n    this.moreActionsNode = null;\n    this.groupNode = /*#__PURE__*/createRef();\n    this.promotedActionsWidths = [];\n    this.bulkActionsWidth = 0;\n    this.addedMoreActionsWidthForMeasuring = 0;\n    this.handleResize = debounce(() => {\n      const {\n        popoverVisible\n      } = this.state;\n      if (this.containerNode) {\n        const containerWidth = this.containerNode.getBoundingClientRect().width;\n        if (containerWidth > 0) {\n          this.setState({\n            containerWidth\n          });\n        }\n      }\n      if (popoverVisible) {\n        this.setState({\n          popoverVisible: false\n        });\n      }\n    }, 50, {\n      trailing: true\n    });\n    this.setButtonsNode = node => {\n      this.buttonsNode = node;\n    };\n    this.setContainerNode = node => {\n      this.containerNode = node;\n    };\n    this.setMoreActionsNode = node => {\n      this.moreActionsNode = node;\n    };\n    this.togglePopover = () => {\n      if (this.props.onMoreActionPopoverToggle) {\n        this.props.onMoreActionPopoverToggle(this.state.popoverVisible);\n      }\n      this.setState(_ref => {\n        let {\n          popoverVisible\n        } = _ref;\n        return {\n          popoverVisible: !popoverVisible\n        };\n      });\n    };\n    this.handleMeasurement = width => {\n      const {\n        measuring\n      } = this.state;\n      if (measuring) {\n        this.promotedActionsWidths.push(width);\n      }\n    };\n  }\n  numberOfPromotedActionsToRender() {\n    const {\n      promotedActions\n    } = this.props;\n    const {\n      containerWidth,\n      measuring\n    } = this.state;\n    if (!promotedActions) {\n      return 0;\n    }\n    const containerWidthMinusAdditionalWidth = Math.max(0, containerWidth - BUTTONS_NODE_ADDITIONAL_WIDTH);\n    if (containerWidthMinusAdditionalWidth >= this.bulkActionsWidth || measuring) {\n      return promotedActions.length;\n    }\n    let sufficientSpace = false;\n    let counter = promotedActions.length - 1;\n    let totalWidth = 0;\n    while (!sufficientSpace && counter >= 0) {\n      totalWidth += this.promotedActionsWidths[counter];\n      const widthWithRemovedAction = this.bulkActionsWidth - totalWidth + this.addedMoreActionsWidthForMeasuring;\n      if (containerWidthMinusAdditionalWidth >= widthWithRemovedAction) {\n        sufficientSpace = true;\n      } else {\n        counter--;\n      }\n    }\n    return clamp(counter, 0, promotedActions.length);\n  }\n  actionSections() {\n    const {\n      actions\n    } = this.props;\n    if (!actions || actions.length === 0) {\n      return;\n    }\n    if (instanceOfBulkActionListSectionArray(actions)) {\n      return actions;\n    }\n    if (instanceOfBulkActionArray(actions)) {\n      return [{\n        items: actions\n      }];\n    }\n  }\n  rolledInPromotedActions() {\n    const {\n      promotedActions\n    } = this.props;\n    const numberOfPromotedActionsToRender = this.numberOfPromotedActionsToRender();\n    if (!promotedActions || promotedActions.length === 0 || numberOfPromotedActionsToRender >= promotedActions.length) {\n      return [];\n    }\n    const rolledInPromotedActions = promotedActions.map(action => {\n      if (instanceOfMenuGroupDescriptor(action)) {\n        return {\n          items: [...action.actions]\n        };\n      }\n      return {\n        items: [action]\n      };\n    });\n    return rolledInPromotedActions.slice(numberOfPromotedActionsToRender);\n  } // eslint-disable-next-line @typescript-eslint/member-ordering\n\n  componentDidMount() {\n    const {\n      actions,\n      promotedActions\n    } = this.props;\n    if (promotedActions && !actions && this.moreActionsNode) {\n      this.addedMoreActionsWidthForMeasuring = this.moreActionsNode.getBoundingClientRect().width;\n    }\n    this.bulkActionsWidth = this.buttonsNode ? this.buttonsNode.getBoundingClientRect().width - this.addedMoreActionsWidthForMeasuring : 0;\n    if (this.containerNode) {\n      this.setState({\n        containerWidth: this.containerNode.getBoundingClientRect().width,\n        measuring: false\n      });\n    }\n  } // eslint-disable-next-line @typescript-eslint/member-ordering\n\n  render() {\n    const {\n      selectMode,\n      disabled,\n      promotedActions,\n      i18n,\n      isSticky,\n      width\n    } = this.props;\n    const actionSections = this.actionSections();\n    if (promotedActions && promotedActions.length > MAX_PROMOTED_ACTIONS && process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(i18n.translate('Polaris.ResourceList.BulkActions.warningMessage', {\n        maxPromotedActions: MAX_PROMOTED_ACTIONS\n      }));\n    }\n    const {\n      popoverVisible,\n      measuring\n    } = this.state;\n    const numberOfPromotedActionsToRender = this.numberOfPromotedActionsToRender();\n    const promotedActionsMarkup = promotedActions && numberOfPromotedActionsToRender > 0 ? [...promotedActions].slice(0, numberOfPromotedActionsToRender).map((action, index) => {\n      if (instanceOfMenuGroupDescriptor(action)) {\n        return /*#__PURE__*/React.createElement(BulkActionMenu, Object.assign({\n          key: index\n        }, action, {\n          isNewBadgeInBadgeActions: this.isNewBadgeInBadgeActions()\n        }));\n      }\n      return /*#__PURE__*/React.createElement(BulkActionButton, Object.assign({\n        key: index,\n        disabled: disabled\n      }, action, {\n        handleMeasurement: this.handleMeasurement\n      }));\n    }) : null;\n    const rolledInPromotedActions = this.rolledInPromotedActions();\n    const activatorLabel = !promotedActions || promotedActions && numberOfPromotedActionsToRender === 0 && !measuring ? i18n.translate('Polaris.ResourceList.BulkActions.actionsActivatorLabel') : i18n.translate('Polaris.ResourceList.BulkActions.moreActionsActivatorLabel');\n    let combinedActions = [];\n    if (actionSections && rolledInPromotedActions.length > 0) {\n      combinedActions = [...rolledInPromotedActions, ...actionSections];\n    } else if (actionSections) {\n      combinedActions = actionSections;\n    } else if (rolledInPromotedActions.length > 0) {\n      combinedActions = [...rolledInPromotedActions];\n    }\n    const actionsPopover = actionSections || rolledInPromotedActions.length > 0 || measuring ? /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Popover,\n      ref: this.setMoreActionsNode\n    }, /*#__PURE__*/React.createElement(Popover, {\n      active: popoverVisible,\n      activator: /*#__PURE__*/React.createElement(BulkActionButton, {\n        disclosure: true,\n        showContentInButton: !promotedActionsMarkup,\n        onAction: this.togglePopover,\n        content: activatorLabel,\n        disabled: disabled,\n        indicator: this.isNewBadgeInBadgeActions()\n      }),\n      preferredAlignment: \"right\",\n      onClose: this.togglePopover\n    }, /*#__PURE__*/React.createElement(ActionList, {\n      sections: combinedActions,\n      onActionAnyItem: this.togglePopover\n    }))) : null;\n    const groupContent = promotedActionsMarkup || actionsPopover ? /*#__PURE__*/React.createElement(Inline, {\n      gap: \"3\"\n    }, promotedActionsMarkup, actionsPopover) : null;\n    if (!groupContent) {\n      return null;\n    }\n    const group = /*#__PURE__*/React.createElement(Transition, {\n      timeout: 100,\n      in: selectMode,\n      key: \"group\",\n      nodeRef: this.groupNode\n    }, status => {\n      const groupClassName = classNames(styles.Group, !isSticky && styles['Group-not-sticky'], !measuring && isSticky && styles[`Group-${status}`], measuring && styles['Group-measuring']);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: groupClassName,\n        ref: this.groupNode,\n        style: {\n          width\n        }\n      }, /*#__PURE__*/React.createElement(EventListener, {\n        event: \"resize\",\n        handler: this.handleResize\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.ButtonGroupWrapper,\n        ref: this.setButtonsNode\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.ButtonGroupInner\n      }, groupContent)));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.setContainerNode\n    }, group);\n  }\n  isNewBadgeInBadgeActions() {\n    const actions = this.actionSections();\n    if (!actions) return false;\n    for (const action of actions) {\n      for (const item of action.items) {\n        var _item$badge;\n        if (((_item$badge = item.badge) === null || _item$badge === void 0 ? void 0 : _item$badge.status) === 'new') return true;\n      }\n    }\n    return false;\n  }\n}\nfunction instanceOfBulkActionListSectionArray(actions) {\n  const validList = actions.filter(action => {\n    return action.items;\n  });\n  return actions.length === validList.length;\n}\nfunction instanceOfBulkActionArray(actions) {\n  const validList = actions.filter(action => {\n    return !action.items;\n  });\n  return actions.length === validList.length;\n}\nfunction instanceOfMenuGroupDescriptor(action) {\n  return 'title' in action;\n}\nfunction BulkActions(props) {\n  const i18n = useI18n();\n  return /*#__PURE__*/React.createElement(BulkActionsInner, Object.assign({}, props, {\n    i18n: i18n\n  }));\n}\nexport { BulkActions };","map":{"version":3,"names":["React","PureComponent","createRef","Transition","debounce","classNames","clamp","styles","BulkActionMenu","useI18n","BulkActionButton","Popover","ActionList","EventListener","Inline","MAX_PROMOTED_ACTIONS","BUTTONS_NODE_ADDITIONAL_WIDTH","BulkActionsInner","constructor","state","popoverVisible","containerWidth","measuring","containerNode","buttonsNode","moreActionsNode","groupNode","promotedActionsWidths","bulkActionsWidth","addedMoreActionsWidthForMeasuring","handleResize","getBoundingClientRect","width","setState","trailing","setButtonsNode","node","setContainerNode","setMoreActionsNode","togglePopover","props","onMoreActionPopoverToggle","handleMeasurement","push","numberOfPromotedActionsToRender","promotedActions","containerWidthMinusAdditionalWidth","Math","max","length","sufficientSpace","counter","totalWidth","widthWithRemovedAction","actionSections","actions","instanceOfBulkActionListSectionArray","instanceOfBulkActionArray","items","rolledInPromotedActions","map","action","instanceOfMenuGroupDescriptor","slice","componentDidMount","render","selectMode","disabled","i18n","isSticky","process","env","NODE_ENV","console","warn","translate","maxPromotedActions","promotedActionsMarkup","index","createElement","Object","assign","key","isNewBadgeInBadgeActions","activatorLabel","combinedActions","actionsPopover","className","ref","active","activator","disclosure","showContentInButton","onAction","content","indicator","preferredAlignment","onClose","sections","onActionAnyItem","groupContent","gap","group","timeout","in","nodeRef","status","groupClassName","Group","style","event","handler","ButtonGroupWrapper","ButtonGroupInner","item","_item$badge","badge","validList","filter","BulkActions"],"sources":["/home/cedcoss/Desktop/react_training/react-tricks/react-todo-app/node_modules/@shopify/polaris/build/esm/components/BulkActions/BulkActions.js"],"sourcesContent":["import React, { PureComponent, createRef } from 'react';\nimport { Transition } from 'react-transition-group';\nimport { debounce } from '../../utilities/debounce.js';\nimport { classNames } from '../../utilities/css.js';\nimport { clamp } from '../../utilities/clamp.js';\nimport styles from './BulkActions.scss.js';\nimport { BulkActionMenu } from './components/BulkActionMenu/BulkActionMenu.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { BulkActionButton } from './components/BulkActionButton/BulkActionButton.js';\nimport { Popover } from '../Popover/Popover.js';\nimport { ActionList } from '../ActionList/ActionList.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nimport { Inline } from '../Inline/Inline.js';\n\nconst MAX_PROMOTED_ACTIONS = 2;\nconst BUTTONS_NODE_ADDITIONAL_WIDTH = 64;\n\nclass BulkActionsInner extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      popoverVisible: false,\n      containerWidth: 0,\n      measuring: true\n    };\n    this.containerNode = null;\n    this.buttonsNode = null;\n    this.moreActionsNode = null;\n    this.groupNode = /*#__PURE__*/createRef();\n    this.promotedActionsWidths = [];\n    this.bulkActionsWidth = 0;\n    this.addedMoreActionsWidthForMeasuring = 0;\n    this.handleResize = debounce(() => {\n      const {\n        popoverVisible\n      } = this.state;\n\n      if (this.containerNode) {\n        const containerWidth = this.containerNode.getBoundingClientRect().width;\n\n        if (containerWidth > 0) {\n          this.setState({\n            containerWidth\n          });\n        }\n      }\n\n      if (popoverVisible) {\n        this.setState({\n          popoverVisible: false\n        });\n      }\n    }, 50, {\n      trailing: true\n    });\n\n    this.setButtonsNode = node => {\n      this.buttonsNode = node;\n    };\n\n    this.setContainerNode = node => {\n      this.containerNode = node;\n    };\n\n    this.setMoreActionsNode = node => {\n      this.moreActionsNode = node;\n    };\n\n    this.togglePopover = () => {\n      if (this.props.onMoreActionPopoverToggle) {\n        this.props.onMoreActionPopoverToggle(this.state.popoverVisible);\n      }\n\n      this.setState(({\n        popoverVisible\n      }) => ({\n        popoverVisible: !popoverVisible\n      }));\n    };\n\n    this.handleMeasurement = width => {\n      const {\n        measuring\n      } = this.state;\n\n      if (measuring) {\n        this.promotedActionsWidths.push(width);\n      }\n    };\n  }\n\n  numberOfPromotedActionsToRender() {\n    const {\n      promotedActions\n    } = this.props;\n    const {\n      containerWidth,\n      measuring\n    } = this.state;\n\n    if (!promotedActions) {\n      return 0;\n    }\n\n    const containerWidthMinusAdditionalWidth = Math.max(0, containerWidth - BUTTONS_NODE_ADDITIONAL_WIDTH);\n\n    if (containerWidthMinusAdditionalWidth >= this.bulkActionsWidth || measuring) {\n      return promotedActions.length;\n    }\n\n    let sufficientSpace = false;\n    let counter = promotedActions.length - 1;\n    let totalWidth = 0;\n\n    while (!sufficientSpace && counter >= 0) {\n      totalWidth += this.promotedActionsWidths[counter];\n      const widthWithRemovedAction = this.bulkActionsWidth - totalWidth + this.addedMoreActionsWidthForMeasuring;\n\n      if (containerWidthMinusAdditionalWidth >= widthWithRemovedAction) {\n        sufficientSpace = true;\n      } else {\n        counter--;\n      }\n    }\n\n    return clamp(counter, 0, promotedActions.length);\n  }\n\n  actionSections() {\n    const {\n      actions\n    } = this.props;\n\n    if (!actions || actions.length === 0) {\n      return;\n    }\n\n    if (instanceOfBulkActionListSectionArray(actions)) {\n      return actions;\n    }\n\n    if (instanceOfBulkActionArray(actions)) {\n      return [{\n        items: actions\n      }];\n    }\n  }\n\n  rolledInPromotedActions() {\n    const {\n      promotedActions\n    } = this.props;\n    const numberOfPromotedActionsToRender = this.numberOfPromotedActionsToRender();\n\n    if (!promotedActions || promotedActions.length === 0 || numberOfPromotedActionsToRender >= promotedActions.length) {\n      return [];\n    }\n\n    const rolledInPromotedActions = promotedActions.map(action => {\n      if (instanceOfMenuGroupDescriptor(action)) {\n        return {\n          items: [...action.actions]\n        };\n      }\n\n      return {\n        items: [action]\n      };\n    });\n    return rolledInPromotedActions.slice(numberOfPromotedActionsToRender);\n  } // eslint-disable-next-line @typescript-eslint/member-ordering\n\n\n  componentDidMount() {\n    const {\n      actions,\n      promotedActions\n    } = this.props;\n\n    if (promotedActions && !actions && this.moreActionsNode) {\n      this.addedMoreActionsWidthForMeasuring = this.moreActionsNode.getBoundingClientRect().width;\n    }\n\n    this.bulkActionsWidth = this.buttonsNode ? this.buttonsNode.getBoundingClientRect().width - this.addedMoreActionsWidthForMeasuring : 0;\n\n    if (this.containerNode) {\n      this.setState({\n        containerWidth: this.containerNode.getBoundingClientRect().width,\n        measuring: false\n      });\n    }\n  } // eslint-disable-next-line @typescript-eslint/member-ordering\n\n\n  render() {\n    const {\n      selectMode,\n      disabled,\n      promotedActions,\n      i18n,\n      isSticky,\n      width\n    } = this.props;\n    const actionSections = this.actionSections();\n\n    if (promotedActions && promotedActions.length > MAX_PROMOTED_ACTIONS && process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(i18n.translate('Polaris.ResourceList.BulkActions.warningMessage', {\n        maxPromotedActions: MAX_PROMOTED_ACTIONS\n      }));\n    }\n\n    const {\n      popoverVisible,\n      measuring\n    } = this.state;\n    const numberOfPromotedActionsToRender = this.numberOfPromotedActionsToRender();\n    const promotedActionsMarkup = promotedActions && numberOfPromotedActionsToRender > 0 ? [...promotedActions].slice(0, numberOfPromotedActionsToRender).map((action, index) => {\n      if (instanceOfMenuGroupDescriptor(action)) {\n        return /*#__PURE__*/React.createElement(BulkActionMenu, Object.assign({\n          key: index\n        }, action, {\n          isNewBadgeInBadgeActions: this.isNewBadgeInBadgeActions()\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(BulkActionButton, Object.assign({\n        key: index,\n        disabled: disabled\n      }, action, {\n        handleMeasurement: this.handleMeasurement\n      }));\n    }) : null;\n    const rolledInPromotedActions = this.rolledInPromotedActions();\n    const activatorLabel = !promotedActions || promotedActions && numberOfPromotedActionsToRender === 0 && !measuring ? i18n.translate('Polaris.ResourceList.BulkActions.actionsActivatorLabel') : i18n.translate('Polaris.ResourceList.BulkActions.moreActionsActivatorLabel');\n    let combinedActions = [];\n\n    if (actionSections && rolledInPromotedActions.length > 0) {\n      combinedActions = [...rolledInPromotedActions, ...actionSections];\n    } else if (actionSections) {\n      combinedActions = actionSections;\n    } else if (rolledInPromotedActions.length > 0) {\n      combinedActions = [...rolledInPromotedActions];\n    }\n\n    const actionsPopover = actionSections || rolledInPromotedActions.length > 0 || measuring ? /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Popover,\n      ref: this.setMoreActionsNode\n    }, /*#__PURE__*/React.createElement(Popover, {\n      active: popoverVisible,\n      activator: /*#__PURE__*/React.createElement(BulkActionButton, {\n        disclosure: true,\n        showContentInButton: !promotedActionsMarkup,\n        onAction: this.togglePopover,\n        content: activatorLabel,\n        disabled: disabled,\n        indicator: this.isNewBadgeInBadgeActions()\n      }),\n      preferredAlignment: \"right\",\n      onClose: this.togglePopover\n    }, /*#__PURE__*/React.createElement(ActionList, {\n      sections: combinedActions,\n      onActionAnyItem: this.togglePopover\n    }))) : null;\n    const groupContent = promotedActionsMarkup || actionsPopover ? /*#__PURE__*/React.createElement(Inline, {\n      gap: \"3\"\n    }, promotedActionsMarkup, actionsPopover) : null;\n\n    if (!groupContent) {\n      return null;\n    }\n\n    const group = /*#__PURE__*/React.createElement(Transition, {\n      timeout: 100,\n      in: selectMode,\n      key: \"group\",\n      nodeRef: this.groupNode\n    }, status => {\n      const groupClassName = classNames(styles.Group, !isSticky && styles['Group-not-sticky'], !measuring && isSticky && styles[`Group-${status}`], measuring && styles['Group-measuring']);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: groupClassName,\n        ref: this.groupNode,\n        style: {\n          width\n        }\n      }, /*#__PURE__*/React.createElement(EventListener, {\n        event: \"resize\",\n        handler: this.handleResize\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.ButtonGroupWrapper,\n        ref: this.setButtonsNode\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.ButtonGroupInner\n      }, groupContent)));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.setContainerNode\n    }, group);\n  }\n\n  isNewBadgeInBadgeActions() {\n    const actions = this.actionSections();\n    if (!actions) return false;\n\n    for (const action of actions) {\n      for (const item of action.items) {\n        var _item$badge;\n\n        if (((_item$badge = item.badge) === null || _item$badge === void 0 ? void 0 : _item$badge.status) === 'new') return true;\n      }\n    }\n\n    return false;\n  }\n\n}\n\nfunction instanceOfBulkActionListSectionArray(actions) {\n  const validList = actions.filter(action => {\n    return action.items;\n  });\n  return actions.length === validList.length;\n}\n\nfunction instanceOfBulkActionArray(actions) {\n  const validList = actions.filter(action => {\n    return !action.items;\n  });\n  return actions.length === validList.length;\n}\n\nfunction instanceOfMenuGroupDescriptor(action) {\n  return 'title' in action;\n}\n\nfunction BulkActions(props) {\n  const i18n = useI18n();\n  return /*#__PURE__*/React.createElement(BulkActionsInner, Object.assign({}, props, {\n    i18n: i18n\n  }));\n}\n\nexport { BulkActions };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}