{"ast":null,"code":"import React, { useState, useCallback } from 'react';\nimport { isSection } from '../../utilities/options.js';\nimport { arraysAreEqual } from '../../utilities/arrays.js';\nimport { useDeepEffect } from '../../utilities/use-deep-effect.js';\nimport styles from './OptionList.scss.js';\nimport { Option } from './components/Option/Option.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { Box } from '../Box/Box.js';\nimport { Text } from '../Text/Text.js';\nfunction OptionList(_ref) {\n  let {\n    options,\n    sections,\n    title,\n    selected,\n    allowMultiple,\n    role,\n    optionRole,\n    verticalAlign,\n    onChange,\n    id: idProp\n  } = _ref;\n  const [normalizedOptions, setNormalizedOptions] = useState(createNormalizedOptions(options, sections, title));\n  const id = useUniqueId('OptionList', idProp);\n  useDeepEffect(() => {\n    setNormalizedOptions(createNormalizedOptions(options || [], sections || [], title));\n  }, [options, sections, title], optionArraysAreEqual);\n  const handleClick = useCallback((sectionIndex, optionIndex) => {\n    const selectedValue = normalizedOptions[sectionIndex].options[optionIndex].value;\n    const foundIndex = selected.indexOf(selectedValue);\n    if (allowMultiple) {\n      const newSelection = foundIndex === -1 ? [selectedValue, ...selected] : [...selected.slice(0, foundIndex), ...selected.slice(foundIndex + 1, selected.length)];\n      onChange(newSelection);\n      return;\n    }\n    onChange([selectedValue]);\n  }, [normalizedOptions, selected, allowMultiple, onChange]);\n  const optionsExist = normalizedOptions.length > 0;\n  const optionsMarkup = optionsExist ? normalizedOptions.map((_ref2, sectionIndex) => {\n    let {\n      title,\n      options\n    } = _ref2;\n    const isFirstOption = sectionIndex === 0;\n    const titleMarkup = title ? /*#__PURE__*/React.createElement(Box, {\n      paddingBlockStart: isFirstOption ? '2' : '4',\n      paddingInlineStart: \"2\",\n      paddingBlockEnd: \"2\",\n      paddingInlineEnd: \"2\",\n      borderBlockStart: !isFirstOption ? 'divider' : undefined\n    }, /*#__PURE__*/React.createElement(Text, {\n      as: \"p\",\n      variant: \"headingXs\"\n    }, title)) : null;\n    const optionsMarkup = options && options.map((option, optionIndex) => {\n      const isSelected = selected.includes(option.value);\n      const optionId = option.id || `${id}-${sectionIndex}-${optionIndex}`;\n      return /*#__PURE__*/React.createElement(Option, Object.assign({\n        key: optionId\n      }, option, {\n        id: optionId,\n        section: sectionIndex,\n        index: optionIndex,\n        onClick: handleClick,\n        select: isSelected,\n        allowMultiple: allowMultiple,\n        verticalAlign: verticalAlign,\n        role: optionRole\n      }));\n    });\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: title || `noTitle-${sectionIndex}`\n    }, titleMarkup, /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.Options,\n      id: `${id}-${sectionIndex}`,\n      role: role\n    }, optionsMarkup));\n  }) : null;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.OptionList,\n    role: role\n  }, optionsMarkup);\n}\nfunction createNormalizedOptions(options, sections, title) {\n  if (options == null) {\n    const section = {\n      options: [],\n      title\n    };\n    return sections == null ? [] : [section, ...sections];\n  }\n  if (sections == null) {\n    return [{\n      title,\n      options\n    }];\n  }\n  return [{\n    title,\n    options\n  }, ...sections];\n}\nfunction optionArraysAreEqual(firstArray, secondArray) {\n  if (isSection(firstArray) && isSection(secondArray)) {\n    return arraysAreEqual(firstArray, secondArray, testSectionsPropEquality);\n  }\n  return arraysAreEqual(firstArray, secondArray);\n}\nfunction testSectionsPropEquality(previousSection, currentSection) {\n  const {\n    options: previousOptions\n  } = previousSection;\n  const {\n    options: currentOptions\n  } = currentSection;\n  const optionsAreEqual = arraysAreEqual(previousOptions, currentOptions);\n  const titlesAreEqual = previousSection.title === currentSection.title;\n  return optionsAreEqual && titlesAreEqual;\n}\nexport { OptionList };","map":{"version":3,"names":["React","useState","useCallback","isSection","arraysAreEqual","useDeepEffect","styles","Option","useUniqueId","Box","Text","OptionList","options","sections","title","selected","allowMultiple","role","optionRole","verticalAlign","onChange","id","idProp","normalizedOptions","setNormalizedOptions","createNormalizedOptions","optionArraysAreEqual","handleClick","sectionIndex","optionIndex","selectedValue","value","foundIndex","indexOf","newSelection","slice","length","optionsExist","optionsMarkup","map","isFirstOption","titleMarkup","createElement","paddingBlockStart","paddingInlineStart","paddingBlockEnd","paddingInlineEnd","borderBlockStart","undefined","as","variant","option","isSelected","includes","optionId","Object","assign","key","section","index","onClick","select","className","Options","firstArray","secondArray","testSectionsPropEquality","previousSection","currentSection","previousOptions","currentOptions","optionsAreEqual","titlesAreEqual"],"sources":["/home/cedcoss/Desktop/react_training/react-tricks/react-todo-app/node_modules/@shopify/polaris/build/esm/components/OptionList/OptionList.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { isSection } from '../../utilities/options.js';\nimport { arraysAreEqual } from '../../utilities/arrays.js';\nimport { useDeepEffect } from '../../utilities/use-deep-effect.js';\nimport styles from './OptionList.scss.js';\nimport { Option } from './components/Option/Option.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { Box } from '../Box/Box.js';\nimport { Text } from '../Text/Text.js';\n\nfunction OptionList({\n  options,\n  sections,\n  title,\n  selected,\n  allowMultiple,\n  role,\n  optionRole,\n  verticalAlign,\n  onChange,\n  id: idProp\n}) {\n  const [normalizedOptions, setNormalizedOptions] = useState(createNormalizedOptions(options, sections, title));\n  const id = useUniqueId('OptionList', idProp);\n  useDeepEffect(() => {\n    setNormalizedOptions(createNormalizedOptions(options || [], sections || [], title));\n  }, [options, sections, title], optionArraysAreEqual);\n  const handleClick = useCallback((sectionIndex, optionIndex) => {\n    const selectedValue = normalizedOptions[sectionIndex].options[optionIndex].value;\n    const foundIndex = selected.indexOf(selectedValue);\n\n    if (allowMultiple) {\n      const newSelection = foundIndex === -1 ? [selectedValue, ...selected] : [...selected.slice(0, foundIndex), ...selected.slice(foundIndex + 1, selected.length)];\n      onChange(newSelection);\n      return;\n    }\n\n    onChange([selectedValue]);\n  }, [normalizedOptions, selected, allowMultiple, onChange]);\n  const optionsExist = normalizedOptions.length > 0;\n  const optionsMarkup = optionsExist ? normalizedOptions.map(({\n    title,\n    options\n  }, sectionIndex) => {\n    const isFirstOption = sectionIndex === 0;\n    const titleMarkup = title ? /*#__PURE__*/React.createElement(Box, {\n      paddingBlockStart: isFirstOption ? '2' : '4',\n      paddingInlineStart: \"2\",\n      paddingBlockEnd: \"2\",\n      paddingInlineEnd: \"2\",\n      borderBlockStart: !isFirstOption ? 'divider' : undefined\n    }, /*#__PURE__*/React.createElement(Text, {\n      as: \"p\",\n      variant: \"headingXs\"\n    }, title)) : null;\n    const optionsMarkup = options && options.map((option, optionIndex) => {\n      const isSelected = selected.includes(option.value);\n      const optionId = option.id || `${id}-${sectionIndex}-${optionIndex}`;\n      return /*#__PURE__*/React.createElement(Option, Object.assign({\n        key: optionId\n      }, option, {\n        id: optionId,\n        section: sectionIndex,\n        index: optionIndex,\n        onClick: handleClick,\n        select: isSelected,\n        allowMultiple: allowMultiple,\n        verticalAlign: verticalAlign,\n        role: optionRole\n      }));\n    });\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: title || `noTitle-${sectionIndex}`\n    }, titleMarkup, /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.Options,\n      id: `${id}-${sectionIndex}`,\n      role: role\n    }, optionsMarkup));\n  }) : null;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.OptionList,\n    role: role\n  }, optionsMarkup);\n}\n\nfunction createNormalizedOptions(options, sections, title) {\n  if (options == null) {\n    const section = {\n      options: [],\n      title\n    };\n    return sections == null ? [] : [section, ...sections];\n  }\n\n  if (sections == null) {\n    return [{\n      title,\n      options\n    }];\n  }\n\n  return [{\n    title,\n    options\n  }, ...sections];\n}\n\nfunction optionArraysAreEqual(firstArray, secondArray) {\n  if (isSection(firstArray) && isSection(secondArray)) {\n    return arraysAreEqual(firstArray, secondArray, testSectionsPropEquality);\n  }\n\n  return arraysAreEqual(firstArray, secondArray);\n}\n\nfunction testSectionsPropEquality(previousSection, currentSection) {\n  const {\n    options: previousOptions\n  } = previousSection;\n  const {\n    options: currentOptions\n  } = currentSection;\n  const optionsAreEqual = arraysAreEqual(previousOptions, currentOptions);\n  const titlesAreEqual = previousSection.title === currentSection.title;\n  return optionsAreEqual && titlesAreEqual;\n}\n\nexport { OptionList };\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AACpD,SAASC,SAAS,QAAQ,4BAA4B;AACtD,SAASC,cAAc,QAAQ,2BAA2B;AAC1D,SAASC,aAAa,QAAQ,oCAAoC;AAClE,OAAOC,MAAM,MAAM,sBAAsB;AACzC,SAASC,MAAM,QAAQ,+BAA+B;AACtD,SAASC,WAAW,QAAQ,oCAAoC;AAChE,SAASC,GAAG,QAAQ,eAAe;AACnC,SAASC,IAAI,QAAQ,iBAAiB;AAEtC,SAASC,UAAU,OAWhB;EAAA,IAXiB;IAClBC,OAAO;IACPC,QAAQ;IACRC,KAAK;IACLC,QAAQ;IACRC,aAAa;IACbC,IAAI;IACJC,UAAU;IACVC,aAAa;IACbC,QAAQ;IACRC,EAAE,EAAEC;EACN,CAAC;EACC,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGvB,QAAQ,CAACwB,uBAAuB,CAACb,OAAO,EAAEC,QAAQ,EAAEC,KAAK,CAAC,CAAC;EAC7G,MAAMO,EAAE,GAAGb,WAAW,CAAC,YAAY,EAAEc,MAAM,CAAC;EAC5CjB,aAAa,CAAC,MAAM;IAClBmB,oBAAoB,CAACC,uBAAuB,CAACb,OAAO,IAAI,EAAE,EAAEC,QAAQ,IAAI,EAAE,EAAEC,KAAK,CAAC,CAAC;EACrF,CAAC,EAAE,CAACF,OAAO,EAAEC,QAAQ,EAAEC,KAAK,CAAC,EAAEY,oBAAoB,CAAC;EACpD,MAAMC,WAAW,GAAGzB,WAAW,CAAC,CAAC0B,YAAY,EAAEC,WAAW,KAAK;IAC7D,MAAMC,aAAa,GAAGP,iBAAiB,CAACK,YAAY,CAAC,CAAChB,OAAO,CAACiB,WAAW,CAAC,CAACE,KAAK;IAChF,MAAMC,UAAU,GAAGjB,QAAQ,CAACkB,OAAO,CAACH,aAAa,CAAC;IAElD,IAAId,aAAa,EAAE;MACjB,MAAMkB,YAAY,GAAGF,UAAU,KAAK,CAAC,CAAC,GAAG,CAACF,aAAa,EAAE,GAAGf,QAAQ,CAAC,GAAG,CAAC,GAAGA,QAAQ,CAACoB,KAAK,CAAC,CAAC,EAAEH,UAAU,CAAC,EAAE,GAAGjB,QAAQ,CAACoB,KAAK,CAACH,UAAU,GAAG,CAAC,EAAEjB,QAAQ,CAACqB,MAAM,CAAC,CAAC;MAC9JhB,QAAQ,CAACc,YAAY,CAAC;MACtB;IACF;IAEAd,QAAQ,CAAC,CAACU,aAAa,CAAC,CAAC;EAC3B,CAAC,EAAE,CAACP,iBAAiB,EAAER,QAAQ,EAAEC,aAAa,EAAEI,QAAQ,CAAC,CAAC;EAC1D,MAAMiB,YAAY,GAAGd,iBAAiB,CAACa,MAAM,GAAG,CAAC;EACjD,MAAME,aAAa,GAAGD,YAAY,GAAGd,iBAAiB,CAACgB,GAAG,CAAC,QAGxDX,YAAY,KAAK;IAAA,IAHwC;MAC1Dd,KAAK;MACLF;IACF,CAAC;IACC,MAAM4B,aAAa,GAAGZ,YAAY,KAAK,CAAC;IACxC,MAAMa,WAAW,GAAG3B,KAAK,GAAG,aAAad,KAAK,CAAC0C,aAAa,CAACjC,GAAG,EAAE;MAChEkC,iBAAiB,EAAEH,aAAa,GAAG,GAAG,GAAG,GAAG;MAC5CI,kBAAkB,EAAE,GAAG;MACvBC,eAAe,EAAE,GAAG;MACpBC,gBAAgB,EAAE,GAAG;MACrBC,gBAAgB,EAAE,CAACP,aAAa,GAAG,SAAS,GAAGQ;IACjD,CAAC,EAAE,aAAahD,KAAK,CAAC0C,aAAa,CAAChC,IAAI,EAAE;MACxCuC,EAAE,EAAE,GAAG;MACPC,OAAO,EAAE;IACX,CAAC,EAAEpC,KAAK,CAAC,CAAC,GAAG,IAAI;IACjB,MAAMwB,aAAa,GAAG1B,OAAO,IAAIA,OAAO,CAAC2B,GAAG,CAAC,CAACY,MAAM,EAAEtB,WAAW,KAAK;MACpE,MAAMuB,UAAU,GAAGrC,QAAQ,CAACsC,QAAQ,CAACF,MAAM,CAACpB,KAAK,CAAC;MAClD,MAAMuB,QAAQ,GAAGH,MAAM,CAAC9B,EAAE,IAAK,GAAEA,EAAG,IAAGO,YAAa,IAAGC,WAAY,EAAC;MACpE,OAAO,aAAa7B,KAAK,CAAC0C,aAAa,CAACnC,MAAM,EAAEgD,MAAM,CAACC,MAAM,CAAC;QAC5DC,GAAG,EAAEH;MACP,CAAC,EAAEH,MAAM,EAAE;QACT9B,EAAE,EAAEiC,QAAQ;QACZI,OAAO,EAAE9B,YAAY;QACrB+B,KAAK,EAAE9B,WAAW;QAClB+B,OAAO,EAAEjC,WAAW;QACpBkC,MAAM,EAAET,UAAU;QAClBpC,aAAa,EAAEA,aAAa;QAC5BG,aAAa,EAAEA,aAAa;QAC5BF,IAAI,EAAEC;MACR,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IACF,OAAO,aAAalB,KAAK,CAAC0C,aAAa,CAAC,IAAI,EAAE;MAC5Ce,GAAG,EAAE3C,KAAK,IAAK,WAAUc,YAAa;IACxC,CAAC,EAAEa,WAAW,EAAE,aAAazC,KAAK,CAAC0C,aAAa,CAAC,IAAI,EAAE;MACrDoB,SAAS,EAAExD,MAAM,CAACyD,OAAO;MACzB1C,EAAE,EAAG,GAAEA,EAAG,IAAGO,YAAa,EAAC;MAC3BX,IAAI,EAAEA;IACR,CAAC,EAAEqB,aAAa,CAAC,CAAC;EACpB,CAAC,CAAC,GAAG,IAAI;EACT,OAAO,aAAatC,KAAK,CAAC0C,aAAa,CAAC,IAAI,EAAE;IAC5CoB,SAAS,EAAExD,MAAM,CAACK,UAAU;IAC5BM,IAAI,EAAEA;EACR,CAAC,EAAEqB,aAAa,CAAC;AACnB;AAEA,SAASb,uBAAuB,CAACb,OAAO,EAAEC,QAAQ,EAAEC,KAAK,EAAE;EACzD,IAAIF,OAAO,IAAI,IAAI,EAAE;IACnB,MAAM8C,OAAO,GAAG;MACd9C,OAAO,EAAE,EAAE;MACXE;IACF,CAAC;IACD,OAAOD,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,CAAC6C,OAAO,EAAE,GAAG7C,QAAQ,CAAC;EACvD;EAEA,IAAIA,QAAQ,IAAI,IAAI,EAAE;IACpB,OAAO,CAAC;MACNC,KAAK;MACLF;IACF,CAAC,CAAC;EACJ;EAEA,OAAO,CAAC;IACNE,KAAK;IACLF;EACF,CAAC,EAAE,GAAGC,QAAQ,CAAC;AACjB;AAEA,SAASa,oBAAoB,CAACsC,UAAU,EAAEC,WAAW,EAAE;EACrD,IAAI9D,SAAS,CAAC6D,UAAU,CAAC,IAAI7D,SAAS,CAAC8D,WAAW,CAAC,EAAE;IACnD,OAAO7D,cAAc,CAAC4D,UAAU,EAAEC,WAAW,EAAEC,wBAAwB,CAAC;EAC1E;EAEA,OAAO9D,cAAc,CAAC4D,UAAU,EAAEC,WAAW,CAAC;AAChD;AAEA,SAASC,wBAAwB,CAACC,eAAe,EAAEC,cAAc,EAAE;EACjE,MAAM;IACJxD,OAAO,EAAEyD;EACX,CAAC,GAAGF,eAAe;EACnB,MAAM;IACJvD,OAAO,EAAE0D;EACX,CAAC,GAAGF,cAAc;EAClB,MAAMG,eAAe,GAAGnE,cAAc,CAACiE,eAAe,EAAEC,cAAc,CAAC;EACvE,MAAME,cAAc,GAAGL,eAAe,CAACrD,KAAK,KAAKsD,cAAc,CAACtD,KAAK;EACrE,OAAOyD,eAAe,IAAIC,cAAc;AAC1C;AAEA,SAAS7D,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}